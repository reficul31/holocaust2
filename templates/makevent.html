<html>
<head>
    <script src ="/static/js/jquery.js"></script>
</head>

<body>
<div class="add panels">
        <div class="add-form-button">Add Event</div>
        <div class="jumbotron add-form-box">
            <div class="add-form-meta">
                <input name="eventname" class="add-form-meta-eventname" placeholder="eventname"> <br>
                <input name="eventpasskey" class="add-form-meta-eventpasskey" placeholder="eventpasskey">
            </div>
            <div class="add-form-fields">
                <div class="add-form-options">
                    <div class="add-form-option add-form-option-textbox">
                        <i class="fa fa-plus"></i> Textbox
                    </div>
                    <div class="add-form-option add-form-option-checkbox">
                        <i class="fa fa-plus"></i> Checkbox
                    </div>
                    <div class="add-form-option add-form-option-radiobutton">
                        <i class="fa fa-plus"></i> Radio Button
                    </div>
                </div>
                <div class="add-form-fields-construct">
                </div>
            </div>
        </div>
        <input id="send" type="submit" name="submit">
</div>
<form id = "senderform" action='/make/event' method='POST'>
    <input type="hidden" id="sender" name= 'sender'>
</form>
</body>

    <script>

    $(document).ready(function() {

        $(document).on('click', '.add-form-option-textbox', function() {
            $('.add-form-fields-construct').append('<div class="form-element form-textbox"><span>Textbox</span><input class="form-textbox-label" placeholder="label"><input class="form-textbox-placeholder" placeholder="placeholder"></div>'); 
            });

        $(document).on('click', '.add-form-option-checkbox', function() {
            $('.add-form-fields-construct').append('<div class="form-element form-checkbox"><span>Checkbox</span><input class="form-checkbox-label" placeholder="label"><input class="form-checkbox-values" placeholder="comma separated values"></div>'); 
            });

        $(document).on('click', '.add-form-option-radiobutton', function() {
             $('.add-form-fields-construct').append('<div class="form-element form-radiobutton"><span>Radio Button</span><input class="form-radiobutton-label" placeholder="label"><input class="form-radiobutton-values" placeholder="comma separated values"></div>');
        });

    });

        $('#send').click(function()
        {
            var formdata = {
            eventname: $('.add-form-meta-eventname').val(),
            eventpasskey: $('.add-form-meta-eventpasskey').val(),
            form_data: {
                fields: []
            }
          };

        $('.form-element').each(function(index) {
            var field = {};
            if ($(this).hasClass('form-textbox')) {
                field = {
                    type: 'textbox',
                    label: $(this).children('input').eq(0).val()
                    //placeholder: $(this).children('input').eq(1).val()
                };
            }
            else if ($(this).hasClass('form-checkbox')) {
                field = {
                    type: 'checkbox',
                    label: $(this).children('input').eq(0).val(),
                    vals: $(this).children('input').eq(1).val()
                };
            }
            else if ($(this).hasClass('form-radiobutton')) {
                field = {
                    type: 'radiobutton',
                    label: $(this).children('input').eq(0).val(),
                    vals: $(this).children('input').eq(1).val()
                };
            }
            
            formdata.form_data.fields.push(field);
        });

        formdata = JSON.stringify(formdata);
        document.getElementById('sender').value= formdata
        console.log(document.getElementById('sender').value)
        $("#senderform").submit()
        });
    </script>